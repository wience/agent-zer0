{
  "title": "User permission requests",
  "content": "# User permission requests\n\n2021-05-10 04:11\n\nTo access a mini program user's device and user information, mini programs must obtain the user's permission. This document contains design guidelines for developers and designers to create a user-friendly journey for users to authorize mini programs to access the following types of information:\n\n- Device information\n- User information\n\nA popup message will be displayed when the mini program requires a user's permission.\n\n# Device information\n\nDevice information includes the resources on user's devices, such as the current location, camera, microphone, photos, Bluetooth, and contacts. For device information, the following JSAPIs are available in the container for mini programs to call:\n\n- [my.getLocation](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_location_getlocation)\n- [my.chooseImage](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_media_image_chooseimage)\n- [my.saveImage](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_media_image_saveimage)\n- [my.scan](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_device_scan_scan)\n- [my.getOpenUserInfo](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_openapi_getopenuserinfo)\n\nFor more information, see **Developing Mini Programs** > **References** > **JSAPIs** > **Device** > **Settings**.\n\n# User information\n\nUser information includes a user's personal information, such as mobile phone number, basic information, wallet member information, points, coupons, and so on. For user information, the wallet app either implements or develops the corresponding APIs to be called for permission.\n\nIn some cases, user terms also need to be displayed and users need to agree with the terms for mini programs to access user information.\n\n# Design principles\n\nUse the following principles as guidelines to design the user flow for requesting permissions:\n\n- **Request permissions only when your mini program requires resources**\n\nWe do not suggest to request for permissions at the launch of the mini program, or request all permissions together at one time. However, if users must agree with user terms before using your mini program, you must display the terms when users enter your mini program for the first time.\n\n- **Display clear choices for users to make**\n\nButtons must clearly distinguish the choices for users to make. The primary button is **Allow** and the secondary button is **Don't Allow**. It is not suggested to use **Cancel** as the secondary button because users will be confused about whether the permission is granted or not.\n\n- **Explain the resources to be accessed specifically**\n\nProvide texts to explain the resources to be accessed clearly. For example, display the user's mobile phone number to be accessed and the source of the number, or list the personal user information to be accessed.\n\n- **Guide users to reverse the decision to grant permission**\n\nIf the user denies permission requests, you can explain the benefits of granting permissions in related scenarios and provide a link to where the user can reverse the decision.\n\n## Applicable scenarios\n\nThe following illustrate how these design principles can be applied.\n\n### Granting permissions is required\n\nIn this scenario, the user cannot enjoy the service provided by the mini program without granting permissions. To ensure that the user understands this, we suggest redirecting the user back to the previous page if the user clicks **Don't Allow**. When the user wants to use the same service, display the bottom sheet component requesting the permission again till the user grants the permission.\n\n![image.png](https://yuque.antfin.com/images/lark/0/2021/png/257484/1610356077729-cdf6e358-bf7a-4eb1-9122-b33d45a8df87.png#align=left&display=inline&height=920&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1840&originWidth=3038&size=522890&status=done&style=none&width=1519)\n\n### Granting permissions is not required\n\nWhile granting permissions allows the user to have a smoother mini program experience, it is sometimes not necessary for the user to use certain mini program functions. For example, if a user grants the mini program permission to access the current location, the user would not have to manually input the address to use the function. When the user uses the same service in future, the bottom sheet component is displayed again to request the permission. ![image.png](https://yuque.antfin.com/images/lark/0/2021/png/257484/1610369261777-bd975b12-0c71-4ffa-90fc-72a5b707034e.png#align=left&display=inline&height=664&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1328&originWidth=3256&size=809498&status=done&style=none&width=1628)\n\n### Options to ignore permission request or reverse decision\n\nWhen granting the permission is not required, you can add the selection of **Do not ask** **again**. If the user checks the selection, the same permission request is not displayed again when the user does the same action within the mini program. However, if permissions are required for certain actions within the mini program, display the bottom sheet component to request the permission and guide the user to where the permission can be reversed.![image.png](https://yuque.antfin.com/images/lark/0/2021/png/257484/1610369184860-428e340b-d660-4257-b492-45bfdf75ceba.png#align=left&display=inline&height=618&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1236&originWidth=3908&size=796841&status=done&style=none&width=1954)\n\n### Request permissions to link the wallet and merchant accounts\n\nIf a user has used a wallet app to sign up for a merchant mini program account, such as with an email address or phone number, the mini program can guide the user to link the mini program account with the wallet account.\n\n![image.png](https://yuque.antfin.com/images/lark/0/2021/png/257484/1610372120365-2cc6d8ee-9877-447a-937f-956644bb7bc9.png#align=left&display=inline&height=1284&margin=%5Bobject%20Object%5D&name=image.png&originHeight=2568&originWidth=3786&size=847153&status=done&style=none&width=1893)\n\n## Component and samples\n\nPermissions requests are communicated to users via a bottom sheet component displayed at the bottom of the screen.\n\n### Bottom sheet\n\nBottom sheet is a UI component that slides from the bottom of the screen when the user makes a specific action. On the bottom sheet, the user can start a new task, make a choice, or confirm the to-do action. The bottom sheet component is significantly less disruptive than the popup modal, which appears in the middle of the screen.\n\n![image.png](https://yuque.antfin.com/images/lark/0/2020/png/257484/1606444373953-396113b8-65be-459a-a12a-f15f7e42a369.png#align=left&display=inline&height=1002&margin=%5Bobject%20Object%5D&name=image.png&originHeight=2004&originWidth=2656&size=578070&status=done&style=none&width=1328)\n\nThe bottom sheet used to request for permissions consists of three parts:\n\n- Mini program name: A right arrow is placed on the right of the mini program name to indicate that the mini program name is a link. The mini program name is linked to the **About Us** page.\n- Requested resources: All requested resources and icons are listed clearly.\n- Buttons: Display two opposite choices for users to make, such as **Allow** and **Don't Allow**.\n\nAs the mini program must request permissions each time the user uses the mini program, we suggest adding the **Remember my choice** selection so that users will not be prompted again.\n\n### Samples\n\n#### Permission requests for resources on the user's mobile device\n\nPermission requests for the user device include the access to contacts, photos, current location, microphone, Bluetooth, and so on. See the following UI samples for details.\n\n![image.png](https://yuque.antfin.com/images/lark/0/2020/png/257484/1606402208691-b1608960-704b-465d-9734-e44a0f623fc7.png#align=left&display=inline&height=670&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1340&originWidth=2678&size=518958&status=done&style=none&width=1339)\n\n#### Permission requests for the user information\n\nUser information includes the user's account, avatar, phone number, and so on. When accessing the user information, comply with the following rules:\n\n- Explain the source of the information if required. For example, the phone number is retrieved from the phone's address book.\n- Provide a button to allow users to change the information if required. For example, when accessing the user account or phone number, provide an option for the user to use another account or phone number.\n- Provide a link to the terms for users as a reference.\n\nSee the following UI samples for details.\n\n![image.png](https://yuque.antfin.com/images/lark/0/2020/png/257484/1606402502720-e9116912-cb01-4510-916e-e83859610673.png#align=left&display=inline&height=468&margin=%5Bobject%20Object%5D&name=image.png&originHeight=936&originWidth=1834&size=168520&status=done&style=none&width=917)![image.png](https://yuque.antfin.com/images/lark/0/2020/png/257484/1606402417569-954ea288-0a69-46f3-95bd-0dacfde50c3a.png#align=left&display=inline&height=585&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1170&originWidth=2180&size=351027&status=done&style=none&width=1090)\n\n## Use case\n\nVodapay, a digital wallet, cooperates with more merchants in the form of third-party mini programs. When users use the merchant mini program in the Vodapay wallet app for the first time, the merchant mini program requests all required permissions so that users can enjoy services provided by the mini program. At the same time, users must sign the terms provided by the merchant before using the mini program.\n\n![image.png](https://yuque.antfin.com/images/lark/0/2020/png/257484/1606458261660-196ac6e3-6770-4fa7-9174-8db8f61cd9f5.png#align=left&display=inline&height=800&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1600&originWidth=2744&size=499549&status=done&style=none&width=1372)",
  "date": "2021-05-10",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/design/user-permission-request",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_design_user-permission-request.json"
}