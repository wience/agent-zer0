{
  "title": "my.offMemoryWarning",
  "content": "# my.offMemoryWarning\n\n2021-05-09 18:43\n\nUse this API to unlisten to the insufficient memory alarm event. Ensure that the parameter (callback) is the same object as the one in [onMemoryWarning](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_device_memory-warning_onmemorywarning).\n\n## Sample Code\n\ncopy\n\n```json\n// API-DEMO page/API/memory-warning/memory-warning.json\n{\n   \"defaultTitle\": \"OnMemoryWarning\"\n}\n```\n\ncopy\n\n```html\n<!-- API-DEMO page/API/memory-warning/memory-warning.axml-->\n<view class=\"page\">\n\n  <button type=\"primary\" onTap=\"onMemoryWarning\">\n    Listen to Insufficient Memory Alarm Event\n  </button>\n\n</view>\n```\n\ncopy\n\n```javascript\n// API-DEMO page/API/memory-warning/memory-warning.js\nPage({\n  onLoad() {\n    this.callback = (res) => {\n        var levelString = 'iOS device, No alarm level exists.';\n        switch (res.level) {\n          case 10:\n            levelString = 'Android device, level = TRIM_MEMORY_RUNNING_LOW';\n            break;\n          case 15:\n            levelString = 'Android device, level = TRIM_MEMORY_RUNNING_CRITICAL';\n            break;\n        }\n        my.alert({\n          title: 'Received insufficient memory alarm',\n          content: levelString\n        });\n    };\n    this.isApiAvailable = my.canIUse('onMemoryWarning');\n  },\n  onMemoryWarning() {\n    if (this.isApiAvailable) {\n      my.onMemoryWarning(this.callback);\n    } else {\n      my.alert({\n        title: 'Client version is too low',\n        content: 'my.onMemoryWarning() and my.offMemoryWarning() need 10.1.35 or higher versions'\n      });\n    }\n  },\n  onUnload() {\n    if (this.isApiAvailable) {\n      my.offMemoryWarning(this.callback);\n    }\n  }\n});\n```\n\n## Whether to pass callback value or not\n\n- If the callback value is not passed, the callbacks of all events will be removed. The sample code is as follows:\n\ncopy\n\n```javascript\nmy.offMemoryWarning();\n```\n\n- If the callback value is passed, only the corresponding callback is removed. The sample code is as follows:\n\ncopy\n\n```javascript\nmy.offMemoryWarning(this.callback);\n```",
  "date": "2021-05-09",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_device_memory-warning_offmemorywarning",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev-old_api_device_memory-warning_offmemorywarning.json"
}