{
  "title": "Obtain basic user information",
  "content": "# Obtain basic user information\n\n2021-05-09 18:43\n\nThe Mini Program is allowed to obtain basic information of the wallet users. This is an open service which, after a user's authorization, captures basic user information such as avatar, nickname, gender, and region.\n\n## Requirements\n\nWhen obtaining basic user information, mini program developers must meet the following requirements:\n\n- Do not guide users to grant authorization at the launch of the mini program. Users have the right to fully understand the mini program and its operations before giving any authorization.\n- Do not obtain the user ID and the user's real name. The information to obtain can only include basic user information, such as user avatar, nickname, gender, and location.\n- As the basic user information and the user's mobile phone number are obtained by two JSAPIs, these two kinds of information cannot be requested in the same modal.\n- Do not obtain user information that is not related with the business. If the user does not grant authorization on the first request, display the modal to allow the user to reverse the decision when the business requires the authorization again.\n\n## Procedures\n\nTo obtain the user's basic information in the mini program, mini program developers must complete the following steps:\n\n### Step 1: Create a mini program\n\n[Apply for an account](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/quick-start_create-account) and [create a mini program](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/quick-start_try-mini-program-demo) on the Mini Program platform.\n\n### Step 2: Add the feature\n\nIn the created mini program, add the feature of obtaining basic user information under the **Features** tab.\n\n![Obtain basic user information](https://gw.alipayobjects.com/mdn/rms_150082/afts/img/A*9cfOTIAalDoAAAAAAAAAAABkARQnAQ#align=left&display=inline&height=580&margin=%5Bobject%20Object%5D&originHeight=580&originWidth=1492&status=done&style=none&width=1492)\n\n### Step 3: Call the JSAPI\n\nCall the [my.getOpenUserInfo](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_openapi_getopenuserinfo) JSAPI to obtain the user's basic information.\n\n**Note:**\n\nDevelopers must consider the possibility of users rejecting to grant the mini program authorization to collect their user information. For such cases, developers must have corresponding solutions, such as guiding the user to manually fill in or upload the user information.\n\n#### Display the authorization modal\n\nIn the [button component](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/component_form-component_button), set the value of _open-type_ as `getAuthorize` and set the value of _scope_ as `userInfo`.\n\nSample code:\n\ncopy\n\n```javascript\n<!-- .axml -->\n<button\n    open-type=\"getAuthorize\"\n    onGetAuthorize=\"onGetAuthorize\"\n    onError=\"onAuthError\"\n    scope='userInfo'>\n</button>\n```\n\n**Button properties**\n\n|     |     |\n| --- | --- |\n| **Name** | **Description** |\n| open-type | The value is `getAuthorize`. |\n| scope | The value is `userInfo`. |\n| onGetAuthorize | Authorization success callback. The Mini Program can call my.getOpenUserInfo to get information in this callback. |\n| onError | Authorization failure callback, including user rejection and system exceptions. |\n\n#### Call the my.getOpenUserInfo JSAPI\n\nAfter the user grants the authorization, the user basic information can be obtained by calling the [my.getOpenUserInfo](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_openapi_getopenuserinfo) JSAPI.\n\nSample code:\n\ncopy\n\n```javascript\n// .js\nonGetAuthorize(res) {\n    my.getOpenUserInfo({\n        fail: (res) => {\n        },\n        success: (res) => {\n            let userInfo = JSON.parse(res.response).response\n        }\n    });\n}\n```\n\nSample of a successfully returned message format:\n\ncopy\n\n```javascript\n{\n    \"response\":{\n        \"response\":{\n            \"code\":\"10000\",\n            \"msg\":\"Success\",\n            \"countryCode\":\"code\",\n            \"gender\":\"f\",\n            \"nickName\":\"XXX\",\n            \"avatar\":\"https://image_domain/images/partner/XXXXXXXX\",\n            \"city\":\"city\",\n            \"province\":\"province\"\n        }\n    }\n}\n```\n\n## FAQs\n\n#### Can the function of obtaining basic user information obtain the wallet userId？\n\nNo. If mini programs need to obtain the user ID, see [user authorization](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_openapi_userauthorization) for details and call [my.getAuthCode](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_openapi_getauthcode) to get the user ID.\n\n#### Can the mini program obtain the user's public information such as mobile phone number, avatar, and nickname at the same time?\n\nMini programs cannot obtain user's mobile phone number, avatar, nickname at the same time in the same modal.\n\nThe following public user information can be obtained with [my.getOpenUserInfo](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_openapi_getopenuserinfo):\n\n- Avatar\n- Nickname\n- Gender\n- Country\n\nThe following private user information can be obtained with [my.getAuthCode](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_openapi_getauthcode):\n\n- User ID\n- Phone number\n\n#### Can mini programs get user ID, real name and private user information through the function of obtaining basic user information？\n\nNo. Through the function of obtaining basic user information, mini programs can only get user avatar, nickname, gender, location, and other public information.",
  "date": "2021-05-09",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_openapi_obtainbasicmemberinformation",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev-old_api_openapi_obtainbasicmemberinformation.json"
}