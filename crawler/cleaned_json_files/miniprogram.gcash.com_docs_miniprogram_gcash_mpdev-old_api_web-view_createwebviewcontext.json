{
  "title": "my.createWebViewContext",
  "content": "# my.createWebViewContext\n\n2021-05-09 18:43\n\nBy creating `webviewContext`, it creates the capability to send messages from Mini Program to `web-view`. Create and return `web-view` context `webViewContext` object.\n\n## Sample Code\n\ncopy\n\n```html\n<!-- .axml -->\n<view>\n  <web-view id=\"web-view-1\" src=\"...\" onMessage=\"onMessage\"></web-view>\n</view>\n```\n\ncopy\n\n```javascript\n// .js\nPage({\n  onLoad() {\n    this.webViewContext = my.createWebViewContext('web-view-1');\n  },\n  // Receive message from HTML5\n  onMessage(e) {\n    console.log(e); //{'sendToMiniProgram': '0'}\n    // Send message to HTML5\n  this.webViewContext.postMessage({'sendToWebView': '1'});\n  }\n})\n```\n\ncopy\n\n```javascript\n// .js\n// my.onMessage needs to be defined in HTML5 js code at first to receive the message from Mini Program.\nmy.onMessage = function(e) {\n  console.log(e); //{'sendToWebView': '1'}\n}\n// HTML5 sends message to Mini Program\nmy.postMessage({'sendToMiniProgram': '0'});\n```\n\n**Note:** The workflow of the above two-way communication capability is that HTML5 sends message to Mini Program at first. After the Mini Program receives the message, it sends message to HTML5.\n\n## Parameters\n\nObject type with the following attributes:\n\n|     |     |     |     |\n| --- | --- | --- | --- |\n| **Property** | **Type** | **Required** | **Description** |\n| webviewId | String | Yes | ID attribute corresponding to the web-view to be created. |\n\n## Return Value\n\nCreate a webViewContext object\n\n`webViewContext` is bound with a `web-view` component via webviewId to implement some functions. List of `webViewContext` object methods:\n\n|     |     |     |\n| --- | --- | --- |\n| **Method** | **Parameters** | **Description** |\n| postMessage | Object | The Mini Program sends message to the web-view component, and works with the my.postMessage provided by web-view.js to implement the two-way communication between Mini Program and web-view page. |",
  "date": "2021-05-09",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_web-view_createwebviewcontext",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev-old_api_web-view_createwebviewcontext.json"
}