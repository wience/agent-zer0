{
  "title": "canvas",
  "content": "# canvas\n\n2021-05-09 18:43\n\nCanvas.\n\nScan QR code to try:\n\n![canvas](https://marmot-local-dev.oss-ap-southeast-1.aliyuncs.com/storage/2020/1/10/5b96484f-60b0-4cb2-afff-361ddbfa5d1f.png#align=left&display=inline&height=196&margin=%5Bobject%20Object%5D&originHeight=196&originWidth=196&status=done&style=none&width=196)\n\n|     |     |     |     |\n| --- | --- | --- | --- |\n| **Property** | **Type** | **Default** | **Description** |\n| id | String |  | Unique component identifier. |\n| style | String |  |  |\n| class | String |  |  |\n| width | String | canvas width attribute |  |\n| height | String | canvas height attribute |  |\n| disable-scroll | Boolean | false | Forbid screen scroll and pull-to-refresh. |\n| onTap | EventHandle |  | Click. |\n| onTouchStart | EventHandle |  | Touch action start. |\n| onTouchMove | EventHandle |  | Move after touch. |\n| onTouchEnd | EventHandle |  | Touch action end. |\n| onTouchCancel | EventHandle |  | Touch action interrupted, such as incoming call reminder, pop-up. |\n| onLongTap | EventHandle |  | Trigger on long-press for 500ms, thereafter move action does not trigger screen scroll. |\n\n**Note:**\n\n- The canvas tab has default width 300px and height 225px\n\n- On the same page, the id cannot be repeated.\n\n- For finer displaying in higher dpr, use the attribute settings to zoom in and use the style to zoom out the canvas. for example:\n\ncopy\n\n```\n<!-- getSystemInfoSync().pixelRatio === 2 -->\n<canvas width=\"200\" height=\"200\" style=\"width:100px;height:100px;\"/>\n```\n\n### Screenshot\n\n![canvas](https://ac.alipay.com/storage/2020/5/11/793a3d8d-5270-405b-9362-e6a670b9c842.png)\n\n### Sample Code\n\ncopy\n\n```html\n<canvas\n  id=\"canvas\"\n  class=\"canvas\"\n  onTouchStart=\"log\"\n  onTouchMove=\"log\"\n  onTouchEnd=\"log\"\n/>\n```\n\ncopy\n\n```javascript\nPage({\n  onReady() {\n    this.point = {\n      x: Math.random() * 295,\n      y: Math.random() * 295,\n      dx: Math.random() * 5,\n      dy: Math.random() * 5,\n      r: Math.round(Math.random() * 255 | 0),\n      g: Math.round(Math.random() * 255 | 0),\n\t\t  b: Math.round(Math.random() * 255 | 0),\n    };\n    this.interval = setInterval(this.draw.bind(this), 17);\n  },\n  draw() {\n    var ctx = my.createCanvasContext('canvas');\n    ctx.setFillStyle('#FFF');\n    ctx.fillRect(0, 0, 305, 305);\n    ctx.beginPath();\n    ctx.arc(this.point.x, this.point.y, 10, 0, 2 * Math.PI);\n    ctx.setFillStyle(\"rgb(\" + this.point.r + \", \" + this.point.g + \", \" + this.point.b + \")\");\n    ctx.fill();\n    ctx.draw();\n    this.point.x += this.point.dx;\n    this.point.y += this.point.dy;\n    if (this.point.x <= 5 || this.point.x >= 295) {\n      this.point.dx = -this.point.dx;\n      this.point.r = Math.round(Math.random() * 255 | 0);\n      this.point.g = Math.round(Math.random() * 255 | 0);\n      this.point.b = Math.round(Math.random() * 255 | 0);\n    }\n    if (this.point.y <= 5 || this.point.y >= 295) {\n      this.point.dy = -this.point.dy;\n      this.point.r = Math.round(Math.random() * 255 | 0);\n      this.point.g = Math.round(Math.random() * 255 | 0);\n      this.point.b = Math.round(Math.random() * 255 | 0);\n    }\n  },\n  drawBall() {\n  },\n  log(e) {\n    if (e.touches && e.touches[0]) {\n      console.log(e.type, e.touches[0].x, e.touches[0].y);\n    } else {\n      console.log(e.type);\n    }\n  },\n  onUnload() {\n    clearInterval(this.interval)\n  }\n})\n```",
  "date": "2021-05-09",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/component_canvas_canvas",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev-old_component_canvas_canvas.json"
}