{
  "title": "my.getAuthCode",
  "content": "# my.getAuthCode\n\n2022-07-03 18:44\n\nCall the API to obtain the authorization code (authCode). The authorization code can be used to obtain access token, so as to easily obtain the app user userId, nickname, etc.\n\nFor more information, refer to the [user authorization](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_openapi_userauthorization).\n\n## Sample code\n\ncopy\n\n```javascript\nmy.getAuthCode({\n  scopes: ['auth_user'],\n  success: (res) => {\n    my.alert({\n      content: res.authCode,\n    });\n  },\n  fail: (res) => {\n      console.log(res.authErrorScopes)\n  },\n});\n```\n\n## Parameters\n\n|     |     |     |     |\n| --- | --- | --- | --- |\n| **Property** | **Type** | **Required** | **Description** |\n| scopes | String/Array | Yes | The scope of authorization, including:<br>- auth\\_base<br>- auth\\_user<br>(auth\\_base is silent authorization) |\n| success | Function | No | Callback function upon call success. |\n| fail | Function | No | Callback function upon call failure. |\n| complete | Function | No | Callback function upon call completion (to be executed upon either call success or failure). |\n\n### Scopes description\n\n|     |     |\n| --- | --- |\n| **Scopes** | **Description** |\n| auth\\_base | Authorized to obtain the unique user ID. |\n| auth\\_user | Authorized to obtain user information. |\n\n**Note:**\n\n- `auth_base` are used to silently obtain user ID, silent authorization does not pop the frame and directly obtains user information. All the other scopes are used for proactive user authorization.\n- The `auth_base` and `auth_user` are legacy scopes and not recommended to be used.\n\n### Callback function\n\nThe incoming parameter is of the Object type with the following attributes:\n\n|     |     |     |     |\n| --- | --- | --- | --- |\n| **Property** | **Type** | **Required** | **Description** |\n| authCode | String | Yes | Authorization code. |\n| authErrorScopes | Key-value | Yes | The scope that failed to grant authorization, key is the scope and value is the error. |\n| authSuccessScopes | Array | Yes | The scope that succeed to grant authorization. |\n\n#### Successful response example\n\ncopy\n\n```javascript\n{\n    \"authCode\":\"1591797390204\",\n    \"authSuccessScopes\":['auth_user']\n}\n```\n\n#### Failure response example\n\ncopy\n\n```javascript\n{\n    \"authErrorScopes\":{\n       \"auth_user\":\"40006\"\n    }\n}\n```",
  "date": "2022-07-03",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/API_OpenAPI_getAuthCode",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev_API_OpenAPI_getAuthCode.json"
}