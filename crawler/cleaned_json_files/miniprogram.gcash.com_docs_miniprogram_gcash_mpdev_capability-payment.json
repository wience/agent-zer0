{
  "title": "Payment capability",
  "content": "# Payment capability\n\n2022-07-03 18:44\n\nUsers can trigger the wallet cashier page on a mini program. The payment process and user experience on the mini program are similar to those of the native app.\n\n# Prerequisites\n\nThis capability is open to a merchant with a valid business license that is verified by its wallet. The merchant website should be accessible and provide clear business content and complete product information.\n\n# User experience\n\nThe overall payment process includes the following steps:\n\n1. A user selects a product in the mini program and places an order.\n2. The user confirms the purchase and enters the payment page that is triggered by the mini program.\n3. The user confirms the payee and amount on the checkout page, then confirms the payment.\n4. The payment success page is displayed.\n\n# Procedures\n\nTo develop the payment capability, follow the steps below:\n\n## 1\\. Create a mini program\n\nThe merchant/ISV gets started with the workspace and publishes a mini program in the Mini Program Platform. For more information, see the [product guide overview](https://miniprogram.gcash.com/docs/miniprogram_gcash/platform/overview) and the [developer guide](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/developer-guide).\n\n## 2\\. Add features (Optional)\n\nBy default, the payment capability is available. For other features, you need to add a feature and define the details according to your business requirements. For more information, see [Features](https://miniprogram.gcash.com/docs/miniprogram_gcash/platform/feature).\n\n## 3\\. Call APIs\n\n![image.png](https://yuque.antfin.com/images/lark/0/2020/png/203752/1599611934951-2a726174-604f-48b3-a0ce-d1a08028c870.png)\n\n1. The wallet user creates a payment order in a mini program.\n2. The merchant or ISV server creates the order by calling the `/{version}/payments/pay` OpenAPI from the wallet server.\n3. The wallet server returns parameters such as `acquirementId` and checkout URL to the mini program.\n4. The mini program calls the `tradePay` JSAPI by triggering the wallet payment process and other return parameters and then gets the response.\n5. The user confirms the payment. Then the wallet server calls the `/{version}/payments/notifyPayment` OpenAPI and sends the order status notification to the min program server.\n6. The user is redirected to the payment result page in the mini program.\n\n**Note**:\n\n- The `version` is the version of Open APIs, for example, `v1` or `v2`.\n- The parameter `userId` or `uid` is fetched by calling the `applyToken` OpenAPI. For more information, see [User information capability](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/capability-user-information).\n\n# API list\n\n|     |     |\n| --- | --- |\n| **JSAPI** | **Description** |\n| [my.tradePay](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_openapi_tradepay) | Trigger the cashier page from the wallet. |\n| **OpenAPI** | **Description** |\n| / `{version}/payments/{apiName}`<br>The `version` is the version of Open APIs, for example, `v1` or `v2`. | For details, see the [Open APIs for Merchants](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/openapi_overview) chapter. |\n\n# More information\n\n[Capabilities](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/capabilities)\n\n[JSAPIs](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_overview)\n\n[Open APIs](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/openapi_overview)\n\n[Developing Mini Program](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/developer-guide)\n\n[Using Mini Program Platform](https://miniprogram.gcash.com/docs/miniprogram_gcash/platform/overview)\n\n[Features](https://miniprogram.gcash.com/docs/miniprogram_gcash/platform/feature)",
  "date": "2022-07-03",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/capability-payment",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev_capability-payment.json"
}