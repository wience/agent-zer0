{
  "title": "Release Custom Component",
  "content": "# Release Custom Component\n\n2022-07-03 18:44\n\nMini program natively supports the introduction of third-party npm module, so the customized component also supports publishing to npm for developers to reuse and share.\n\n## Customized Component Directory Recommended for Publishing\n\nThe following directory structure is for reference only.\n\n### File Structure\n\ncopy\n\n```javascript\n├── src // used for individually customized component\n│   ├── index.js\n│   ├── index.json\n│   ├── index.axml\n│   └── index.acss\n├── ├── demo //used for demo of customized component\n│   ├── ├── index.js\n│   ├── ├── index.json\n│   ├── ├── index.axml\n│   ├── └── index.acss\n├── app.js // used for demo of customized component Mini Program\n├── app.json\n└── app.acss\n```\n\n### JSON Sample\n\ncopy\n\n```json\n// package.json\n{\n  \"name\": \"your-custom-component\",\n  \"version\": \"1.0.0\",\n  \"description\": \"your-custom-component\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"your-custom-component-repository-url\"\n  },\n  \"files\": [\\\n    \"es\"\\\n  ],\n  \"keywords\": [\\\n    \"custom-component\",\\\n    \"mini-program\"\\\n  ],\n  \"devDependencies\": {\n    \"rc-tools\": \"6.x\"\n  },\n  \"scripts\": {\n    \"build\": \"rc-tools run compile && node scripts/cp.js && node scripts/rm.js\",\n    \"pub\": \"git push origin && npm run build && npm publish\"\n  }\n}\n```\n\n### js File Sample\n\ncopy\n\n```javascript\n// scripts/cp.js\nconst fs = require('fs-extra');\nconst path = require('path');\n// copy file\nfs.copySync(path.join(__dirname, '../src'), path.join(__dirname, '../es'), {\n  filter(src, des){\n    return !src.endsWith('.js');\n  }\n});\n```\n\ncopy\n\n```javascript\n// scripts/rm.js\nconst fs = require('fs-extra');\nconst path = require('path');\n// remove unnecessary file\nconst dirs = fs.readdirSync(path.join(__dirname, '../es'));\ndirs.forEach((item) => {\n  if (item.includes('app.') || item.includes('DS_Store') || item.includes('demo')) {\n    fs.removeSync(path.join(__dirname, '../es/', item));\n  } else {\n    const moduleDirs = fs.readdirSync(path.join(__dirname, '../es/', item));\n    moduleDirs.forEach((item2) => {\n      if (item2.includes('demo')) {\n        fs.removeSync(path.join(__dirname, '../es/', item, item2));\n      }\n    });\n  }\n});\nfs.removeSync(path.join(__dirname, '../lib/'));\n```",
  "date": "2022-07-03",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/framework_custom-component_release-custom-component",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev_framework_custom-component_release-custom-component.json"
}