{
  "title": "/v2/users/inquiryUserInfo",
  "content": "# /v2/users/inquiryUserInfo\n\n2022-07-05 23:31\n\nPOST `/v2/users/inquiryUserInfo`\n\nWith this API call, a merchant can inquire about user information with the access token. The specific information you can inquire about is defined in the **my.getAuthCode** JSAPI.\n\n# Structure\n\nA message consists of a header and body. The following sections are focused on the body structure. For the header structure, see:\n\n- [Request header](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/openapi_overview#3mLq0)\n- [Response header](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/openapi_overview#YdmVS)\n\n## Request parameters\n\n|     |     |     |     |     |\n| --- | --- | --- | --- | --- |\n| **Field** | **Data type** | **Required** | **Description** | **Example** |\n| appId | String | Yes | Indicates the unique ID assigned by Mini Program Platform to identify a mini program.<br>- Maximum length: 32 characters<br>- Characters not allowed: special characters such as @ # ? <br>**Note**: Obtain this field via the [my.getAppIdSync](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_basic_getappidsync) JSAPI or Mini Program Platform. | \"3333010071465913xxx\" |\n| accessToken | String | Yes | The access token is used to access user information. For the specific information that can be accessed, see the [my.getAuthCode](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_openapi_getauthcode) JSAPI. <br>- Maximum length: 128 characters<br>- Characters not allowed: special characters such as @ # ? <br>**Note**: Obtain this field via the [/v2/authorizations/applyToken](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/v2_applytoken) API. | \"281010033AB2F588D14B43238637264FCA5AAF35xxxx\" |\n| authClientId | String | Yes | Indicates the unique ID assigned by the super app to identify an authorized merchant.<br>- Maximum length: 128 characters<br>- Characters not allowed:special characters such as @ # ? | \"202016726873874774774xxxx\" |\n| extendInfo | String | No | Indicates the extended information about this API.<br>- Maximum length: 4096 characters<br>- Characters not allowed: special characters such as @ # ? <br>- Can be `Null`. | copy<br>```<br>{<br>    \"memo\": \"memo\"<br>}<br>``` |\n\n## Response parameters\n\n|     |     |     |     |     |\n| --- | --- | --- | --- | --- |\n| **Field** | **Data type** | **Required** | **Description** | **Example** |\n| result | [Result](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/v2_data_dict#ygoqd) | Yes | Indicates the request result such as status and error codes. | copy<br>```<br>{<br>    \"resultCode\":\"SUCCESS\",<br>    \"resultStatus\":\"S\",<br>    \"resultMessage\":\"success\"<br>}<br>``` |\n| userInfo | [User](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/v2_data_dict#1eef42d590cc76d328c54a144b55520e) | No | Indicates the user information that the merchant queried.<br>**Note**: <br>- The _appUserId_ assigned by the super app is passed to the _extendInfo_ in the _userInfo_ to uniquely identify a user.<br>- The _acqUserId_ assigned by [Alipay merchant service](https://global.alipay.com/docs/devcenter) is passed to the _extendInfo_ in the _userInfo_ to uniquely identify a user. | See [Response](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/v2_users_inquiryuserinfo#IqWSF) sample for details. |\n\n### Result process logic\n\nIn the response, the _result.resultStatus_ field indicates the result of processing a request. The following table describes each result status:\n\n|     |     |\n| --- | --- |\n| **Result status** | **Description** |\n| S | The inquiry is successful.<br>Use the `accessToken` to access user information within the corresponding scope. <br>The corresponding _result.resultCode_ is `SUCCESS` and the _result.resultMessage_ is `Success`. |\n| U | The status of the inquiry is unknown.  <br>The corresponding _result.resultCode_ is `UNKNOWN_EXCEPTION` and _result.resultMessage_ is \"An API calling is failed, which is caused by unknown reasons.\". For details, see the [Common error codes](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/error_codesv2#oyy9K) section. |\n| F | The inquiry is failed. <br>The corresponding _result.resultCode_ and _result.resultMessage_ are various based on different situations. For details, see the following [Error codes](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/v2_users_inquiryuserinfo#QiyKe) section. |\n\n# Error codes\n\nError codes are usually classified into the following categories:\n\n- [Common error codes](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/error_codesv2#oyy9K) are common for all mini program OpenAPIs in V2.\n- API-specific error codes: are listed in the following table.\n\n|     |     |     |     |\n| --- | --- | --- | --- |\n| **Error code** | **Result status** | **Error message** | **Further action** |\n| INVALID\\_AUTH\\_CLIENT | F | Either the merchant does not exist or the merchant does not onboard to the native app. | Use a valid _authClientId_ assigned by the super app. |\n| INVALID\\_ACCESS\\_TOKEN | F | The access token is not valid. | Obtain a new authorization code via the **my.getAuthCode** JSAPI and then get a valid access token with the authorization code via the **/v2/authorizations/applyToken** API. |\n| EXPIRED\\_ACCESS\\_TOKEN | F | The access token is expired. | Obtain a new access token with a refresh token via the **/v2/authorizations/applyToken** API. |\n\n# Samples\n\nThe data flow of inquiring about a user's information is illustrated as below:\n\n![image](https://ac.alipay.com/storage/2020/5/11/793a3d8d-5270-405b-9362-e6a670b9c842.png)\n\n1. The merchant server calls this API with the access token to inquire about the user's information.\n2. The super app server returns the user's information to the merchant server based on the scopes of the access token.\n\n## Request\n\ncopy\n\n```json\n{\n  \"appId\": \"3333010071465913xxx\",\n  \"accessToken\": \"281010033AB2F588D14B43238637264FCA5AAF35xxxx\",\n  \"authClientId\": \"202016726873874774774xxxx\"\n\n}\n```\n\nThe merchant ( `202016726873874774774xxxx`) uses the access token ( `281010033AB2F588D14B43238637264FCA5AAF35xxxx`) to access the user's specific information.\n\n## Response\n\ncopy\n\n```json\n{\n \"result\": {\n    \"resultCode\":\"SUCCESS\",\n    \"resultStatus\":\"S\",\n    \"resultMessage\":\"success\"\n  },\n  \"userInfo\": {\n    \"userId\": \"1000001119398804xxxx\",\n    \"status\": \"ACTIVE\",\n    \"nickName\": \"Jack\",\n    \"userName\": {\n      \"fullName\": \"Jack Sparrow\",\n      \"firstName\": \"Jack\",\n      \"lastName\": \"Sparrow\"\n    },\n    \"avatar\": \"http://example.com/avatar.htm?avatarId=FBF16F91-28FB-47EC-B9BE-27B285C23CD3xxxx\",\n    \"gender\": \"MALE\",\n    \"birthDate\": \"2020-07-25\",\n    \"nationality\": \"US\",\n    \"loginIdInfos\": [\\\n      {\\\n        \"loginId\": \"1116874199xxx\",\\\n        \"loginIdType\": \"MOBILE_PHONE\"\\\n      }\\\n     ],\n    \"contactInfos\": [\\\n      {\\\n        \"contactNo\": \"1116874199xxx\",\\\n        \"contactType\": \"MOBILE_PHONE\"\\\n      }\\\n    ],\n    \"extendInfo\": \"{\\\"appUserId\\\":\\\"200xxxx\\\",\\\"acqUserId\\\":\\\"300xxxx\\\"}\"\n  }\n}\n```\n\n- _result.resultStatus_ is `S`, which means the inquiry request is successful.\n- _userInfo_ describes the user's information you get via the **inquiryUserInfo** API. The information includes _userId_, _status_, _nickName_, _userName_, _avatar_, _gender_, _birthDate_, _nationality_, _loginIdInfos_, _contactInfos_, and _extendInfo_.\n\n# Related links\n\n[my.getAuthCode](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_openapi_getauthcode)\n\n[my.getAppIdSync](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/api_basic_getappidsync)\n\n[/v2/authorizations/applyToken](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/v2_applytoken)",
  "date": "2022-07-05",
  "source": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev/v2_users_inquiryuserinfo",
  "path": "miniprogram_gcash",
  "type": "miniprogram",
  "filename": "miniprogram.gcash.com_docs_miniprogram_gcash_mpdev_v2_users_inquiryuserinfo.json"
}