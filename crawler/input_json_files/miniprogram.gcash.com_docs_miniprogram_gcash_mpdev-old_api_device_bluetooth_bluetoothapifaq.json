{
  "markdown": "# Bluetooth API FAQ\n\n2021-05-10 03:43\n\nQ: Does the API call of `my. WriteBLECharacteristicValue` return an empty value?\n\nA: No. Calling this API returns the value of what you write.\n\nQ: Why is listening not supported with the API call of `my.onBLECharacteristicValueChange`? Do I have to write before I can listen?\n\nA: Yes. To call this API, you first need to write before you can listen. In order to prevent multiple callbacks of an event caused by multiple registered event listeners, it is recommended to call off method to listen to an event and close the previous event listener, before you call on method.\n\nQ: Why do I get an error code `10014` with the API call of `my. Why writeBLECharacteristicValue`?\n\nA: The error code `10014` means the data you send are either empty or incorrectly formatted. It is recommended to check for errors in the written data or HEX conversion.\n\nQ: Can I use the hexadecimal array to write characteristic value with the API `my writeBLECharacteristicValue` ?\n\nA: No. The characteristic values you write are hexadecimal strings, which are limited to 20 bytes.\n\nQ: What is the `deviceId` format for Android and iOS devices?\n\nA:\n\n- An Android device gets the MAC address for bluetooth, such as: `11:22:33:44:55:66`.\n\n- An iOS device gets the UUID of Bluetooth, such as: `00000000-0000-0000-0000-000000000000`.\n\nQ: Why can't I search for any device with the API call of `my.startBluetoothDevicesDiscovery`?\n\nA: Please make sure that the device is discoverable. If the API is passed to Services, make sure that the discoverable content of the device contains the UUID of the service.\n\nQ: If GPS positioning is not enabled when calling an bluetooth API, some devices will report an error message that bluetooth can't be connected as positioning service is not enabled.\n\nA: The bluetooth function of the mini program relies on GPS positioning, as about 20% mobile phones rely on GPS to enable bluetooth. It is recommended to guide users to turn on the GPS positioning service in order to be connected with bluetooth.\n\nQ: How do I resolve device connection failure?\n\nA: Please make sure the correct `deviceId` is transmitted with strong signals. If the signal is weak, a device connection failure may occur.\n\nQ: How to resolve write/read data failure?\n\nA: Make sure to check the following settings:\n\n- `DeviceId`, `serviceId`, and `characteristicId` are transmitted in the correct format.\n\n- `DeviceId` is connected (You can call the API `my. OnBLEConnectionStateChanged` to listen to the connection state changes; Call the API `my. GetConnectedBluetoothDevices` to check for devices that are connected.\n\n- Write a method in the connected state.\n\n- Check and make sure `characteristicId` belongs to this Service.\n\n- This characteristic supports write/read.\n\nQ: How do I receive data notifications?\n\nA:\n\n- Make sure to call the API `my notifyBLECharacteristicValueChange` with correct parameters.\n\n- Notify or indicate features are supported in the transmitted `characteristicID`.\n\n- Make sure the hardware is notified.\n\n- Pay attention to the basic flow sequence, i.e. call the API `notifyBLECharacteristicValueChange` once you're connected.\n\nQ: Why are event callbacks called multiple times?\n\nA: The same event was listened due to multiple anonymous function registrations. It is recommended to call off method to listen for an event and close the previous event listener, before you call on method.\n\n[iframe](https://tracert.alipay.com/cross.html)",
  "metadata": {
    "ogTitle": "Bluetooth API FAQ | Developing Mini Programs | Documentation",
    "og:image": "",
    "description": "Q: Does the API call of my. WriteBLECharacteristicValue return an empty value?A: No. Calling this API returns the value of what you write.Q: Why is listening not supported with the API call of my.",
    "og:url": "",
    "ogDescription": "Q: Does the API call of my. WriteBLECharacteristicValue return an empty value?A: No. Calling this API returns the value of what you write.Q: Why is listening not supported with the API call of my.",
    "favicon": "https://gw.alipayobjects.com/mdn/rms_150082/afts/img/A*rOH-T5TEL-cAAAAAAAAAAABkARQnAQ",
    "keywords": "",
    "robots": "noarchive",
    "og:type": "website",
    "og:description": "Q: Does the API call of my. WriteBLECharacteristicValue return an empty value?A: No. Calling this API returns the value of what you write.Q: Why is listening not supported with the API call of my.",
    "ogUrl": "",
    "ogImage": "",
    "og:title": "Bluetooth API FAQ | Developing Mini Programs | Documentation",
    "viewport": "width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover",
    "title": "Bluetooth API FAQ | Developing Mini Programs | Documentation",
    "scrapeId": "5a3388c1-a425-4191-bdb3-7564e16ff1bc",
    "sourceURL": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_device_bluetooth_bluetoothapifaq",
    "url": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_device_bluetooth_bluetoothapifaq",
    "statusCode": 200
  },
  "html": "<!DOCTYPE html><html style=\"--vh: 7.2px;\" data-theme=\"light\">\n    <body>\n    \n    \n    <div id=\"root\"><div class=\"index-module_height100__dDLuI\"><div style=\"top:0\"></div><div class=\"styles-module_searchWrap__mIEtV index-module_mobileSearch__Lianv \"><svg class=\"icon icon-search styles-module_searchIcon__2wekS\" viewBox=\"64 64 896 896\" width=\"1em\" height=\"1em\" fill=\"#ccc\" aria-hidden=\"true\"><path d=\"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\"></path></svg><input type=\"text\" title=\"Press 's' to start the search\" placeholder=\"Search documentation\"><div class=\"styles-module_resultWrap__LQyY1 \"><div class=\"styles-module_result__6EDKs\"><div class=\"styles-module_resultScroll__x5srB\"></div></div><div class=\"styles-module_mask__naKUh\"></div></div></div><div class=\"undefined index-module_height100__dDLuI\"><div class=\"index-module_container__-pyWH    idocs-global-container  idocs-global-normal-container\"><div class=\"index-module_center__Kh8xX  idocs-global-index-center \" style=\"max-width: none; min-height: calc(var(--vh, 1vh) * 100 - 26px);\"><main class=\"index-module_main__2B9Eq    idocs-global-main-with-toc\" style=\"padding-left:264px;width:0\"><article class=\"index-module_content__6p5ch  idocs-global-content\"><div class=\"index-module_contentInner__KQHGJ idocs-global-content-inner\"><div class=\"styles-module_docBody__zUo8V\"><h1 class=\"styles-module_title__6bcTh styles-module_anchored__AxVRP \"><span class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span><span>Bluetooth API FAQ</span></span></h1><div class=\"styles-module_updateDate__1rqmL\"><time datetime=\"2021-05-10 03:43\" style=\"color: var(--font-color-third);\"><svg class=\"icon icon-clock\" width=\"1em\" height=\"1em\"><path d=\"M6.832 0C3.058 0 0 3.134 0 7s3.058 7 6.832 7 6.833-3.134 6.833-7-3.059-7-6.833-7zm4.152 11.253a5.835 5.835 0 01-1.867 1.29 5.695 5.695 0 01-2.285.473 5.717 5.717 0 01-2.284-.472 5.872 5.872 0 01-1.867-1.29 5.995 5.995 0 01-1.259-1.912A6.096 6.096 0 01.961 7c0-.812.155-1.6.46-2.34A6.032 6.032 0 012.68 2.746a5.835 5.835 0 011.866-1.29A5.706 5.706 0 016.832.984c.793 0 1.562.159 2.285.472.699.304 1.326.737 1.867 1.29.539.552.963 1.196 1.258 1.912.307.742.462 1.53.462 2.342s-.155 1.6-.46 2.34a5.998 5.998 0 01-1.26 1.913zM9.78 6.891H7.313V3.609a.486.486 0 00-.48-.492c-.266 0-.481.22-.481.492v3.282c0 .544.43.984.96.984h2.47c.265 0 .48-.22.48-.492a.486.486 0 00-.48-.492z\" fill=\"currentColor\" fill-rule=\"nonzero\" fill-opacity=\".7\"></path></svg>2021-05-10 03:43</time></div><div class=\"styles-module_content__2jcQS styles-module_yuqueContent__iJuXe\"><p data-lake-id=\"9a5dc62876c3c5dd1156039aeda60e1c_p_0\">Q: Does the API call of <code>my. WriteBLECharacteristicValue</code> return an empty value?</p><p data-lake-id=\"7db01496f267ce46abfc95a04a475cab_p_2\">A: No. Calling this API returns the value of what you write.</p><p data-lake-id=\"5c67e61a63b8f88c1a0074e22f50b26f_p_4\">Q: Why is listening not supported with the API call of <code>my.onBLECharacteristicValueChange</code>? Do I have to write before I can listen?</p><p data-lake-id=\"64c1e4b79251be97b3a27591f06b3971_p_6\">A: Yes. To call this API, you first need to write before you can listen. In order to prevent multiple callbacks of an event caused by multiple registered event listeners, it is recommended to call off method to listen to an event and close the previous event listener, before you call on method.</p><p data-lake-id=\"a33b6eb496dcdf6d32dc5fdb86b34b28_p_8\">Q: Why do I get an error code <code>10014</code> with the API call of <code>my. Why writeBLECharacteristicValue</code>?</p><p data-lake-id=\"7ce67b7816faa7cf8966f849765b44cd_p_10\">A: The error code <code>10014</code> means the data you send are either empty or incorrectly formatted. It is recommended to check for errors in the written data or HEX conversion.</p><p data-lake-id=\"55dbc87f4e9250bb1c7f86ce9fd482eb_p_12\">Q: Can I use the hexadecimal array to write characteristic value with the API <code>my writeBLECharacteristicValue</code> ?</p><p data-lake-id=\"fc3d0fb7c9b283b0a63e04d78f54482f_p_14\">A: No. The characteristic values you write are hexadecimal strings, which are limited to 20 bytes.</p><p data-lake-id=\"f780769a9e1417f27f2566fcf9608161_p_16\">Q: What is the <code>deviceId</code> format for Android and iOS devices?</p><p data-lake-id=\"8d176975cb83a1af18c2072c282585c2_p_18\">A:</p><ul><li>An Android device gets the MAC address for bluetooth, such as: <code>11:22:33:44:55:66</code>.</li></ul><ul><li>An iOS device gets the UUID of Bluetooth, such as: <code>00000000-0000-0000-0000-000000000000</code>.</li></ul><p data-lake-id=\"ffef6145b9d38d4d5b4b607e9bd9bbf8_p_21\">Q: Why can't I search for any device with the API call of <code>my.startBluetoothDevicesDiscovery</code>?</p><p data-lake-id=\"6b1ea615e6c533d6f63a60c76acf6f11_p_23\">A: Please make sure that the device is discoverable. If the API is passed to Services, make sure that the discoverable content of the device contains the UUID of the service.</p><p data-lake-id=\"84e28468b2ef83758138f079331e406d_p_25\">Q: If GPS positioning is not enabled when calling an bluetooth API, some devices will report an error message that bluetooth can't be connected as positioning service is not enabled.</p><p data-lake-id=\"7c113422a45575fe1dd3daa4ecdf69f5_p_27\">A: The bluetooth function of the mini program relies on GPS positioning, as about 20% mobile phones rely on GPS to enable bluetooth. It is recommended to guide users to turn on the GPS positioning service in order to be connected with bluetooth.</p><p data-lake-id=\"e51cef5158435e00bdc53742337d5238_p_29\">Q: How do I resolve device connection failure?</p><p data-lake-id=\"2a8037ba1ef44b2074bf06a62cf14f7a_p_31\">A: Please make sure the correct <code>deviceId</code> is transmitted with strong signals. If the signal is weak, a device connection failure may occur.</p><p data-lake-id=\"dd54d647b2cacec97f22d70387f7a996_p_33\">Q: How to resolve write/read data failure?</p><p data-lake-id=\"4ee3d4fe45436f04cdb6c5b3c159843b_p_35\">A: Make sure to check the following settings:</p><ul><li><code>DeviceId</code>, <code>serviceId</code>, and <code>characteristicId</code> are transmitted in the correct format.</li></ul><ul><li><code>DeviceId</code> is connected (You can call the API <code>my. OnBLEConnectionStateChanged</code> to listen to the connection state changes; Call the API <code>my. GetConnectedBluetoothDevices</code> to check for devices that are connected.</li></ul><ul><li>Write a method in the connected state.</li></ul><ul><li>Check and make sure <code>characteristicId</code> belongs to this Service.</li></ul><ul><li>This characteristic supports write/read.</li></ul><p data-lake-id=\"d1bd47f72fef5a4260d33cea9aa7d7d5_p_38\">Q: How do I receive data notifications?</p><p data-lake-id=\"1e6fe46caef0fade0bd444cbf48e8cfe_p_40\">A:</p><ul><li>Make sure to call the API <code>my notifyBLECharacteristicValueChange</code> with correct parameters.</li></ul><ul><li>Notify or indicate features are supported in the transmitted <code>characteristicID</code>.</li></ul><ul><li>Make sure the hardware is notified.</li></ul><ul><li>Pay attention to the basic flow sequence, i.e. call the API <code>notifyBLECharacteristicValueChange</code> once you're connected.</li></ul><p data-lake-id=\"02a24ceefd2a9e15c397b5fd97d67fc3_p_43\">Q: Why are event callbacks called multiple times?</p><p data-lake-id=\"0254a29f8e2251fb5c39b558eae87ab9_p_45\">A: The same event was listened due to multiple anonymous function registrations. It is recommended to call off method to listen for an event and close the previous event listener, before you call on method.</p></div></div><div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button><button class=\"pswp__button pswp__button--share\" title=\"Share\"></button><button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button><button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"><div class=\"pswp__share-tooltip\"></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\"></button><button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\"></button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div></div></article></main></div></div></div></div></div>\n    \n    \n  \n  <iframe src=\"https://tracert.alipay.com/cross.html\" style=\"width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;\"></iframe></body></html>",
  "warning": "This scrape job was throttled at your current concurrency limit. If you'd like to scrape faster, you can upgrade your plan."
}