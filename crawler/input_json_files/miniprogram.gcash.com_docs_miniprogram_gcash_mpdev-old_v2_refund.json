{
  "markdown": "# /v2/payments/refund\n\n2021-05-09 18:43\n\nPOST `/v2/payments/refund`\n\nThe `refund` API is used to initiate a refund of a successful payment, refund a transaction and return money to the payer. The transaction can be refunded partially or fully. This API returns `SUCCESS` when deducting money from the merchant is successful.\n\n**Note:**\n\n1) The merchant/partner submits a refund request to wallets directly\n\n2) Wallets determines whether the refund is successful based on its own payment status and respond to merchants/partners.\n\n3) Multiple refund requests are supported for one successful payment, but the total refund amount can not be greater than the payment amount.\n\n# Message structure\n\n## Request\n\n|     |     |     |     |     |\n| --- | --- | --- | --- | --- |\n| **Property** | **Data type** | **Required** | **Description** | **Example** |\n| refundRequestId | String | Yes | The unqiue ID of a refund generated by merchants.<br>- Max. length: 64 characters.<br>- This field is used for [idempotence](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_idempotency) control. For the refund requests which are initiated with the same `refundRequestId` and reach a final status (S or F), the  must return the unique result. | \"2019112719074101000700000088881xxxx\" |\n| paymentId | String | No | The unqiue ID of the corresponding original payment.<br>Max. length: 64 characters. | \"201911271907410100070000009999xxxx\" |\n| paymentRequestId | String | No | The paymentRequestId for the corresponding original payment.<br>Max. length: 64 characters. | \"20200101234567890133333xxxx\" |\n| refundAmount | [**Amount**](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_data_dict#2umUE) | Yes | Refund amount. | {<br>    \"currency\": \"USD\",<br>    \"value\": \"10000\"<br>} |\n| refundReason | String | No | Refund reason.<br>Max. length: 256 characters. | \"have returned goods to the shop\" |\n| extendInfo | String | No | The extend information, wallets and merchants can put extending information in this property.<br>Max. length: 4096 characters. | \"This is additional information\" |\n\n## Response\n\n|     |     |     |     |     |\n| --- | --- | --- | --- | --- |\n| **Property** | **Data type** | **Required** | **Description** | **Example** |\n| result | [**Result**](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_data_dict#sHXZc) | Yes | The request result, which contains information such as status and error codes. | {<br>    \"resultCode\": \"SUCCESS\",<br>    \"resultStatus\": \"S\",<br>    \"resultMessage\": \"success\"<br>} |\n| refundId | String | No | Unique refund order number. It is generated by Wallet, which uniquely identifies the refund.<br>It is mandatory when the **result.resultStatus** is **S**.<br>Max. length: 64 characters. | \"2019112719074101000700000019000xxxx\" |\n| refundTime | String/Datetime | No | Deduct money from merchant success time, after then will start to refund money to user. which follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard. It is mandatory when the **result.resultStatus** is **S**. | \"2019-11-27T12:01:01+08:30\" |\n| extendInfo | String | No | The extensive information returned by wallets.<br>Max. length: 4096 characters. | \"This is additional information\" |\n\n### Result Process Logic\n\nIn the response, the `result.resultStatus` field indicates the result of processing a request as follows.\n\n|     |     |\n| --- | --- |\n| **resultStatus** | **Decription** |\n| S | The corresponding `result.resultCode` is \"SUCCESS\" and the  `result.resultMessage`  is \"Success\".<br>It means that the refund is successful, the merchant/partner can process as success. |\n| A | The corresponding `result.resultCode` is \"ACCEPT\"; and the  `result.resultMessage` varies based on different situations. |\n| U | The corresponding `result.resultCode` is \"UNKNOWN\\_EXCEPTION\" and `result.resultMessage`  is \"An API calling is failed, which is caused by unknown reasons.\". For details, see the [Common error codes](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/error_codes#oyy9K) section.<br>It means that when handling the refund request, an unknown exception occurs. The merchant/partner can call the Refund Inquiry ( `inquiryRefund`) API to query or retry this Refund ( `refund`) API.  <br>What needs to note is as follow:<br>- U status (inquiry/retry still gets U)  can not set to fail or success on merchant/partner system.<br>- U status (inquiry/retry still gets U)  should not refund/charge to user by offline (Maybe will make fund loss).<br>If other response (almost never occur), the merchant/partner should process like U. |\n| F | That means this transaction is failed. The corresponding `result.resultCode`  and `result.resultMessage` vary based on different situations. <br>It means that the refund is failed. The failure reasons can be the followings, but not limited to: <br>- The refund date time exceeds the allowable refund window ( `result.resultCode` = **REFUND\\_WINDOW\\_EXCEED**).<br>- The refund amount is greater than the payment amount.<br>For details, see the following [Error codes](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_refund#QiyKe) section. |\n\n# Error codes\n\nError codes are usually classified into the following categories:\n\n- [Common error codes](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/error_codes#oyy9K): are common for all Mini Program OpenAPIs.\n- API-specific error codes: are listed in the following table.\n\n|     |     |     |\n| --- | --- | --- |\n| **resultStatus** | **resultCode** | **resultMessage** |\n| U | REFUND\\_IN\\_PROCESS | Refund is under processing. |\n| F | REPEAT\\_REQ\\_INCONSISTENT | Repeated submit, and requests are inconsistent. |\n| F | PARTNER\\_STATUS\\_ABNORMAL | Partner status abnormal. |\n| F | ORDER\\_NOT\\_EXIST | Order does not exist. |\n| F | ORDER\\_STATUS\\_INVALID | Order status is invalid. |\n| F | REFUND\\_WINDOW\\_EXCEED | Exceed Refund window. |\n| F | REFUND\\_AMOUNT\\_EXCEED | The total refund amount has exceed the payment amount. |\n| F | PARTNER\\_BALANCE\\_NOT\\_ENOUGH | The partner balance is not enough. |\n| F | CURRENCY\\_NOT\\_SUPPORT | The currency is not supported. |\n| F | EXPIRED\\_AGENT\\_TOKEN | The agent token of Mini Program is expired. |\n| F | INVALID\\_AGENT\\_TOKEN | The agent token of Mini Program is invalid. |\n\n# Sample\n\nFor example, a wallet user applies for refund of 100 USD of a successful payment at the merchant/partner. So the merchant/partner will call this refund API to the wallet to refund money to users.\n\n![/v2/payments/refund](https://ac.alipay.com/storage/2020/5/11/793a3d8d-5270-405b-9362-e6a670b9c842.png)\n\n1. User can start a refund request from the Mini Program or the merchant cashier.\n2. The merchant server calls this refund interface to refund.\n3. E-wallet returns the refund result to the merchant server.\n4. The merchant should return the refund result to the Mini Program or the merchant cashier.\n\n## Request\n\ncopy\n\n```json\n{\n  \"refundRequestId\": \"2019112719074101000700000088881xxxx\",\n  \"paymentId\": \"201911271907410100070000009999xxxx\",\n  \"refundAmount\": {\n    \"currency\": \"USD\",\n    \"value\": \"10000\"\n  }\n}\n```\n\n- **refundRequestId** is the unique ID of this refund request, generated by merchant/partner, merchant/partner should make sure it is unique, because wallet will use **refundRequestId** to do idempotent process.\n- **paymentId** is the payment ID generated by Wallet, which is the unique payment identifier associated with this refund.\n- **refundAmount** describes 100 USD should refund to user, refund amount should less than origin payment amount. The amount to pay out for this **refund.refundAmount.currency** and **paymentAmount.currency** in [payment request](https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/xww2sz) are the same. And if there are multiple refunds for a particular payment, the total successful refunded amount cannot exceed the payment amount in the payment transaction.\n\n**Note:**\n\n- **paymentId** and **paymentRequestId** can not both empty, wallet has to find out the origin payment order based on **paymentId** or **paymentRequestId**.\n\n## Response\n\ncopy\n\n```json\n{\n  \"result\": {\n    \"resultCode\": \"SUCCESS\",\n    \"resultStatus\": \"S\",\n    \"resultMessage\": \"success\"\n  },\n  \"refundId\": \"2019112719074101000700000019000xxxx\",\n  \"refundTime\": \"2019-11-27T12:01:01+08:30\"\n}\n```\n\n- **result.resultStatus==S** shows that theWallet refund is successful.\n- **refundId** is generated by Wallet, uniquely identifies the refund.\n- **refundTime** describes the success date time of this refund.\n\n[iframe](https://tracert.alipay.com/cross.html)",
  "metadata": {
    "robots": "noarchive,true",
    "og:type": "website",
    "keywords": "",
    "favicon": "https://gw.alipayobjects.com/mdn/rms_150082/afts/img/A*rOH-T5TEL-cAAAAAAAAAAABkARQnAQ",
    "og:description": "POST /v2/payments/refundThe refund API is used to initiate a refund of a successful payment, refund a transaction and return money to the payer. The transaction can be refunded partially or fully.",
    "ogTitle": "/v2/payments/refund | Developing Mini Programs | Documentation",
    "og:url": "",
    "ogDescription": "POST /v2/payments/refundThe refund API is used to initiate a refund of a successful payment, refund a transaction and return money to the payer. The transaction can be refunded partially or fully.",
    "ogImage": "",
    "og:title": "/v2/payments/refund | Developing Mini Programs | Documentation",
    "viewport": "width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover",
    "ogUrl": "",
    "title": "/v2/payments/refund | Developing Mini Programs | Documentation",
    "og:image": "",
    "description": "POST /v2/payments/refundThe refund API is used to initiate a refund of a successful payment, refund a transaction and return money to the payer. The transaction can be refunded partially or fully.",
    "scrapeId": "6aa7288f-2d63-4b1c-a70f-9c6765b8ee12",
    "sourceURL": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_refund",
    "url": "https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_refund",
    "statusCode": 200
  },
  "html": "<!DOCTYPE html><html style=\"--vh: 1000px;\" data-theme=\"light\">\n    <body>\n    \n    \n    <div id=\"root\"><div class=\"index-module_height100__dDLuI\"><div style=\"top:0\"></div><div class=\"styles-module_searchWrap__mIEtV index-module_mobileSearch__Lianv \"><svg class=\"icon icon-search styles-module_searchIcon__2wekS\" viewBox=\"64 64 896 896\" width=\"1em\" height=\"1em\" fill=\"#ccc\" aria-hidden=\"true\"><path d=\"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z\"></path></svg><input type=\"text\" title=\"Press 's' to start the search\" placeholder=\"Search documentation\"><div class=\"styles-module_resultWrap__LQyY1 \"><div class=\"styles-module_result__6EDKs\"><div class=\"styles-module_resultScroll__x5srB\"></div></div><div class=\"styles-module_mask__naKUh\"></div></div></div><div class=\"undefined index-module_height100__dDLuI\"><div class=\"index-module_container__-pyWH    idocs-global-container  idocs-global-normal-container\"><div class=\"index-module_center__Kh8xX index-module_noToc__pwJcX idocs-global-no-toc idocs-global-index-center \" style=\"max-width: 1128px; min-height: calc(var(--vh, 1vh) * 100 - 45.90625px);\"><main class=\"index-module_main__2B9Eq    \" style=\"padding-left:0;width:0\"><article class=\"index-module_content__6p5ch  idocs-global-content\" style=\"padding-left:0\"><div class=\"index-module_contentInner__KQHGJ idocs-global-content-inner\"><div class=\"styles-module_docBody__zUo8V\"><h1 class=\"styles-module_title__6bcTh styles-module_anchored__AxVRP \"><span class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span><span>/v2/payments/refund</span></span></h1><div class=\"styles-module_updateDate__1rqmL\"><time datetime=\"2021-05-09 18:43\" style=\"color: var(--font-color-third);\"><svg class=\"icon icon-clock\" width=\"1em\" height=\"1em\"><path d=\"M6.832 0C3.058 0 0 3.134 0 7s3.058 7 6.832 7 6.833-3.134 6.833-7-3.059-7-6.833-7zm4.152 11.253a5.835 5.835 0 01-1.867 1.29 5.695 5.695 0 01-2.285.473 5.717 5.717 0 01-2.284-.472 5.872 5.872 0 01-1.867-1.29 5.995 5.995 0 01-1.259-1.912A6.096 6.096 0 01.961 7c0-.812.155-1.6.46-2.34A6.032 6.032 0 012.68 2.746a5.835 5.835 0 011.866-1.29A5.706 5.706 0 016.832.984c.793 0 1.562.159 2.285.472.699.304 1.326.737 1.867 1.29.539.552.963 1.196 1.258 1.912.307.742.462 1.53.462 2.342s-.155 1.6-.46 2.34a5.998 5.998 0 01-1.26 1.913zM9.78 6.891H7.313V3.609a.486.486 0 00-.48-.492c-.266 0-.481.22-.481.492v3.282c0 .544.43.984.96.984h2.47c.265 0 .48-.22.48-.492a.486.486 0 00-.48-.492z\" fill=\"currentColor\" fill-rule=\"nonzero\" fill-opacity=\".7\"></path></svg>2021-05-09 18:43</time></div><div class=\"styles-module_content__2jcQS styles-module_yuqueContent__iJuXe\"><p data-lake-id=\"2d7f4510b74d89967a41a01394bacfb4\"><span>POST </span><code>/v2/payments/refund</code></p><p data-lake-id=\"2bc52a3a6065f14b8ccc81015c9fb45d\"><span>The </span><code><span>refund</span></code>&nbsp;<span>API is used to initiate a</span><span> refund of a successful payment, refund a transaction and return money to the payer. The transaction can be refunded partially or fully. This API returns </span><code><span>SUCCESS</span></code>&nbsp;<span>when deducting money </span>from the merchant is successful.</p><p data-lake-id=\"079b5d7b3bf5e76807f9b0c5ff333321\"><strong>Note:</strong></p><p data-lake-id=\"8a147d94b34a7962c1a3cf0f3324bcd2\">1) The merchant/partner submits a refund request to wallets directly</p><p data-lake-id=\"796c9113ac8239621f3f423b0fe1d379\">2) <span>Wallets</span> determines whether the refund is successful based on its own payment status and respond to m<span>erchants/partners</span>.</p><p data-lake-id=\"7fc47df9b6cd89b2d6854b98ec7db95a\">3) Multiple refund requests are supported for one successful payment, but the total refund amount can not be greater than the payment amount.</p><h1 id=\"Om8if\" class=\"styles-module_anchored__AxVRP h1 \"><span data-id=\"Om8if\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span style=\"color:#000000\"><span>Message structure</span></span></h1><h2 id=\"jpeNg\" class=\"styles-module_anchored__AxVRP h2 \"><span data-id=\"jpeNg\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span>Request</span></h2><div class=\"styles-module_scrollX__JARyY\"><table style=\"width:890px\" class=\"lake-table\"><colgroup><col width=\"150\"><col width=\"109\"><col width=\"84\"><col width=\"234\"><col width=\"313\"></colgroup><tbody><tr><td style=\"background-color:#D4EEFC\"><p data-lake-id=\"9b6545cfa0e6ba6daa2c6efcd770514b\"><strong><span>Property</span></strong></p></td><td style=\"background-color:#D4EEFC\"><p data-lake-id=\"576020e8b070725bebec6600af2087c1\"><strong>Data type</strong></p></td><td rowspan=\"1\" style=\"background-color:#D4EEFC\"><strong><span style=\"color:#404040\">Required</span></strong></td><td style=\"background-color:#D4EEFC\"><p data-lake-id=\"4ad332915fd14334487a6b6111b941c8\"><strong>Description</strong></p></td><td rowspan=\"1\" style=\"background-color:#D4EEFC\"><p data-lake-id=\"67461797418dd5260b77429f7b3172e9_p_0\"><strong>Example</strong></p></td></tr><tr><td colspan=\"1\" rowspan=\"1\">refundRequestId</td><td colspan=\"1\">String&nbsp;</td><td colspan=\"1\"><p data-lake-id=\"1b15eb97bff296d0685016c4b182b6c4\">Yes</p></td><td colspan=\"1\" rowspan=\"1\"><p data-lake-id=\"5c5521ea986e8d8d7f638f2a3567c8da\">The unqiue ID of a refund generated by merchants.</p><ul><li>Max. length: 64 characters.</li><li><span class=\"lake-fontsize-11\"><span>This field is used for</span></span><span class=\"lake-fontsize-11\"> </span><a href=\"https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/api_idempotency\" target=\"_blank\" data-idocs-page-id=\"cec9e27f-f0ba-43e6-af81-604fcc244c06\" data-idocs-page-slug=\"api_idempotency\"><span class=\"lake-fontsize-11\">idempotence </span></a><span class=\"lake-fontsize-11\">control. For the refund requests which are initiated with the same&nbsp;</span><span class=\"lake-fontsize-11\"><code>refundRequestId</code></span><span class=\"lake-fontsize-11\">&nbsp;and reach a final status (S or F),&nbsp;</span><span class=\"lake-fontsize-11\"><span>the </span></span><span class=\"lake-fontsize-11\">&nbsp;must return the unique result.</span></li></ul></td><td rowspan=\"1\"><p data-lake-id=\"20a1ceb911112bfcab6ed425481e902a\">\"2019112719074101000700000088881xxxx\"</p></td></tr><tr><td rowspan=\"1\" colspan=\"1\">paymentId</td><td>String&nbsp;</td><td rowspan=\"1\"><p data-lake-id=\"a55c1e738fcaea5e08f784b3862e2844\">No</p></td><td rowspan=\"1\" colspan=\"1\"><p data-lake-id=\"9ab1fc8303fa0979cdab58a61cc89afd\">The&nbsp;<span>unqiue</span><span>&nbsp;ID of the corresponding original payment.</span></p><p data-lake-id=\"96f0d181f730702af257aa86bd56700d\"><span>Max. length: 64 characters.</span></p></td><td rowspan=\"1\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">\"201911271907410100070000009999xxxx\"</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\">paymentRequestId</td><td colspan=\"1\">String&nbsp;</td><td colspan=\"1\"><p data-lake-id=\"a55c1e738fcaea5e08f784b3862e2844\">No</p></td><td colspan=\"1\" rowspan=\"1\"><p data-lake-id=\"e9f6cb94a28fa2ff0b3d8a16f6cd33b7\">The paymentRequestId for the corresponding original payment.</p><p data-lake-id=\"20002b196423813fe1f8554ef1576c91\"><span>Max. length: 64 characters.</span></p></td><td rowspan=\"1\"><p data-lake-id=\"9e1c5d9197c43961efad9007159ba5a1\"><span>\"20200101234567890133333xxxx\"</span></p></td></tr><tr><td colspan=\"1\" rowspan=\"1\">refundAmount</td><td colspan=\"1\"><a href=\"https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_data_dict#2umUE\" target=\"_blank\" data-idocs-page-id=\"796c7417-ef84-440f-8b0e-164b66c7ff73\" data-idocs-page-slug=\"v2_data_dict\"><strong><span>Amount</span></strong></a></td><td colspan=\"1\"><p data-lake-id=\"1b15eb97bff296d0685016c4b182b6c4\">Yes</p></td><td colspan=\"1\"><p data-lake-id=\"709949f6f7cecc50ad945c7f4311c1ac\">Refund amount.</p></td><td rowspan=\"1\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">{</p><p data-lake-id=\"798ef41fd1f53801e3528bf9c1016a66\"> &nbsp; &nbsp;\"currency\": \"USD\",</p><p data-lake-id=\"2b4f4bd0d7137c0b316d73c79fe3335f\"> &nbsp; &nbsp;\"value\": \"10000\"</p><p data-lake-id=\"56612f283e5942dec0d63f1341bae35f\"> &nbsp;}</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\">refundReason</td><td colspan=\"1\">String&nbsp;</td><td colspan=\"1\"><p data-lake-id=\"a55c1e738fcaea5e08f784b3862e2844\">No</p></td><td colspan=\"1\" rowspan=\"1\"><p data-lake-id=\"ce5b42dd131f93e04f59594160bd2437\">Refund reason.</p><p data-lake-id=\"548b824c4ee1f5db98960f6ded5f80e9\"><span>Max. length: 256 characters.</span></p></td><td rowspan=\"1\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">\"have returned goods to the shop\"</p></td></tr><tr><td colspan=\"1\" style=\"text-align:left\">extendInfo</td><td colspan=\"1\" style=\"text-align:left\">String&nbsp;</td><td colspan=\"1\"><p data-lake-id=\"a55c1e738fcaea5e08f784b3862e2844\">No</p></td><td colspan=\"1\" style=\"text-align:left\"><p data-lake-id=\"b01408c1a1b11b3c37d65cb144b7758b\"><span>The extend information, wallets and merchants can put extending information in this property.</span></p><p data-lake-id=\"9e023ae59554be66893e1bb909d16933\"><span>Max. length: 4096 characters.</span></p></td><td rowspan=\"1\" style=\"text-align:left;background-color:#FFFFFF\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"><span>\"This is additional information\"</span></p></td></tr></tbody></table></div><h2 id=\"7CSjh\" class=\"styles-module_anchored__AxVRP h2 \"><span data-id=\"7CSjh\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span>Response</span></h2><div class=\"styles-module_scrollX__JARyY\"><table style=\"width:884px\" class=\"lake-table\"><colgroup><col width=\"99\"><col width=\"128\"><col width=\"83\"><col width=\"244\"><col width=\"330\"></colgroup><tbody><tr><td style=\"background-color:#D4EEFC\"><p data-lake-id=\"9b6545cfa0e6ba6daa2c6efcd770514b\"><strong><span>Property</span></strong></p></td><td style=\"background-color:#D4EEFC\"><p data-lake-id=\"576020e8b070725bebec6600af2087c1\"><strong>Data type</strong></p></td><td rowspan=\"1\" style=\"background-color:#D4EEFC\"><strong><span style=\"color:#404040\">Required</span></strong></td><td style=\"background-color:#D4EEFC\"><p data-lake-id=\"4ad332915fd14334487a6b6111b941c8\"><strong>Description</strong></p></td><td rowspan=\"1\" style=\"background-color:#D4EEFC\"><p data-lake-id=\"67461797418dd5260b77429f7b3172e9_p_0\"><strong>Example</strong></p></td></tr><tr><td rowspan=\"1\" colspan=\"1\">result</td><td><p data-lake-id=\"7cfdacfdbe4981b6a0116bc60a5a7b4c\"><a href=\"https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_data_dict#sHXZc\" target=\"_blank\" data-idocs-page-id=\"796c7417-ef84-440f-8b0e-164b66c7ff73\" data-idocs-page-slug=\"v2_data_dict\"><strong>Result</strong></a></p></td><td rowspan=\"1\"><p data-lake-id=\"1b15eb97bff296d0685016c4b182b6c4\">Yes</p></td><td>The request result, which contains information  such as status and error codes.</td><td rowspan=\"1\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">{</p><p data-lake-id=\"4d51b54fd64dcece096c0660d4cf344b\"> &nbsp; &nbsp;\"resultCode\": \"SUCCESS\",</p><p data-lake-id=\"5528c4cea2865598a54d04a4240f72f9\"> &nbsp; &nbsp;\"resultStatus\": \"S\",</p><p data-lake-id=\"00e9a1820559d6b8b79656630f2bdb33\"> &nbsp; &nbsp;\"resultMessage\": \"success\"</p><p data-lake-id=\"0148fac4c984a139f588ab2f234f691d\"> &nbsp;}</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\">refundId</td><td colspan=\"1\">String&nbsp;</td><td colspan=\"1\"><p data-lake-id=\"a55c1e738fcaea5e08f784b3862e2844\">No</p></td><td colspan=\"1\" rowspan=\"1\"><p data-lake-id=\"5ecf4dcd9cecc29aef5dbaf898a09396\">Unique refund order number. It is&nbsp;<span>generated by Wallet, which uniquely identifies the refund.</span></p>It is mandatory when the <strong>result.resultStatus</strong> is <strong>S</strong>.<p data-lake-id=\"60c44be803d2d2191dae42cd5dc4dd39\"><span>Max. length: 64 characters.</span></p></td><td rowspan=\"1\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"> \"2019112719074101000700000019000xxxx\"</p></td></tr><tr><td rowspan=\"1\" colspan=\"1\">refundTime</td><td><p data-lake-id=\"c95caf1323182a40957086bcc246008a\">String/Datetime</p></td><td rowspan=\"1\"><p data-lake-id=\"a55c1e738fcaea5e08f784b3862e2844\">No</p></td><td><p data-lake-id=\"9ab1234f81d83ccf6016adad70081bfd\"><span style=\"color:#3B4151\">Deduct money from merchant success time, after then will start to refund money to user.</span><span>&nbsp;which follows the&nbsp;</span><a href=\"https://www.iso.org/iso-8601-date-and-time-format.html\" target=\"_blank\">ISO 8601&nbsp;</a><span>standard.&nbsp;</span>It is mandatory when the <strong>result.resultStatus</strong> is <strong>S</strong>.</p></td><td rowspan=\"1\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">\"2019-11-27T12:01:01+08:30\"</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\">extendInfo</td><td colspan=\"1\">String&nbsp;</td><td colspan=\"1\"><p data-lake-id=\"a55c1e738fcaea5e08f784b3862e2844\">No</p></td><td colspan=\"1\" rowspan=\"1\"><p data-lake-id=\"50100feb3d27e25ad0ce7789fbef61a1\">The extensive information returned by wallets.</p><p data-lake-id=\"d5c33295bbd7870070026fccb35429d1\"><span>Max. length: 4096 characters.</span></p></td><td rowspan=\"1\" style=\"background-color:#FFFFFF\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"><span>\"This is additional information\"</span></p></td></tr></tbody></table></div><h3 id=\"bUhOh\" class=\"styles-module_anchored__AxVRP h3 \"><span data-id=\"bUhOh\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span>Result Process Logic</span></h3><p data-lake-id=\"5209da52be79efd3a761ac22f96b0425\">In the response, the <code><span style=\"background-color:transparent\">result.resultStatus</span></code> field indicates the result of processing a request as follows. </p><div class=\"styles-module_scrollX__JARyY\"><table style=\"width:745px\" class=\"lake-table\"><colgroup><col width=\"107\"><col width=\"638\"></colgroup><tbody><tr><td style=\"background-color:#D4EEFC\"><strong>resultStatus</strong></td><td style=\"background-color:#D4EEFC\"><p data-lake-id=\"eb5a739a0e0a782de6c79737ee53f4a4\"><strong>Decription&nbsp;</strong></p></td></tr><tr><td style=\"text-align:left\"><p data-lake-id=\"7067e4c5f0244bcbd298a7249dc017e0\"><span>S</span></p></td><td><p data-lake-id=\"a5eef5a5231c7d8c100e02f219118eb2\">The corresponding <code>result.resultCode</code> is \"SUCCESS\" and the&nbsp; <code>result.resultMessage</code>&nbsp; is \"Success\".</p><p data-lake-id=\"ec52eedfd58ecb2e4221dc8a24912149\">It means that&nbsp;<span>the refund is successful, the merchant/partner can process as success.</span><span style=\"background-color:#FADB14\"><br></span></p></td></tr><tr><td style=\"text-align:left\"><p data-lake-id=\"5662418cefd4160bfcc9466c67928fe9\">A</p></td><td><p data-lake-id=\"d436eda091e8f18e506b301fa013451d\">The corresponding <code>result.resultCode</code> is \"ACCEPT\"; and the&nbsp; <code>result.resultMessage</code> <span>varies based on different situations</span>.</p></td></tr><tr><td style=\"text-align:left\"><p data-lake-id=\"27fa24fe771f3dad405871e6634652a3\">U</p></td><td style=\"text-align:left\"><p data-lake-id=\"8f987519926743bde4a241d77e0d5b6d\"><span> </span>The corresponding <code>result.resultCode</code> is \"<span>UNKNOWN_EXCEPTION\"&nbsp;</span>and <code>result.resultMessage</code>&nbsp; is \"<span>An API calling is failed, which is caused by unknown reasons.\".&nbsp;</span>For details, see the <a href=\"https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/error_codes#oyy9K\" data-idocs-page-id=\"a3d4efd8-eaa3-4f0e-8ab7-584a7024a0e7\" data-idocs-page-slug=\"error_codes\">Common error codes</a> section.</p><p data-lake-id=\"91a866ab63f679187e903fe977bf8aea\">It means that when handling the refund request, an unknown exception occurs. The merchant/partner can call the Refund Inquiry (<code>inquiryRefund</code>) API <span>to query </span>or retry this Refund (<code>refund</code>) API. &nbsp;</p><p data-lake-id=\"6919e16d3a2e9009221e2b6c382aec4f\">What needs to note is as follow:</p><ul><li>U <span>status </span>(inquiry/retry still gets U) &nbsp;can not set to fail or success on merchant/partner system.</li><li>U <span>status </span><span>(inquiry</span><span>/retry</span><span> still gets U)</span> &nbsp;should not refund/charge to user by offline (Maybe will make fund loss).</li></ul><p data-lake-id=\"57983184dbf7d549352d2b1b164bc16b\">If other response (almost never occur), the merchant/partner should process like U.</p></td></tr><tr><td style=\"text-align:left\"><p data-lake-id=\"1c55af831526c702e8847428b9cd4376\">F</p></td><td><p data-lake-id=\"6a60a5a2390c57a8cea6278e3e348409\"><span>That means this transaction is failed.&nbsp;</span>The corresponding <code>result.resultCode</code>&nbsp; and <code>result.resultMessage</code> vary based on different situations.&nbsp;</p><p data-lake-id=\"febc98699e0f33489ab41245cd03fd41\"><span>It means that the refund is failed. The failure reasons can be the followings, but not limited to:&nbsp;</span><span>&nbsp;</span></p><ul><li><span>The refund date time exceeds the allowable refund window (</span><code><span>result.resultCode</span></code><strong><span> </span></strong><span>= </span><strong><span>REFUND_WINDOW_EXCEED</span></strong><span>).</span></li><li><span>The refund amount is greater than the payment amount.</span></li></ul><p data-lake-id=\"ef19f99eee12ff4e3663f1f70e9a7283\">For details, see the <span>following&nbsp;</span><a href=\"https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/v2_refund#QiyKe\" data-idocs-page-id=\"b32061ab-d500-48f2-b64a-25d2745e7722\" data-idocs-page-slug=\"v2_refund\">Error codes</a> section.</p></td></tr></tbody></table></div><h1 id=\"QiyKe\" class=\"styles-module_anchored__AxVRP h1 \"><span data-id=\"QiyKe\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span style=\"background-color:transparent\"><span>Error codes  </span></span></h1><p data-lake-id=\"5eeb1f8e05d4009b8b590f65b998c536\">Error codes are usually classified into the following categories:</p><ul><li><a href=\"https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/error_codes#oyy9K\" data-idocs-page-id=\"a3d4efd8-eaa3-4f0e-8ab7-584a7024a0e7\" data-idocs-page-slug=\"error_codes\">Common error codes</a>: <span>are common for all Mini Program OpenAPIs. &nbsp;</span></li><li><span>API-specific error codes: </span><span>are listed in the following table.</span></li></ul><div class=\"styles-module_scrollX__JARyY\"><table style=\"width:747px\" class=\"lake-table\"><colgroup><col width=\"105.9907455444336\"><col width=\"267\"><col width=\"375\"></colgroup><tbody><tr><td style=\"background-color:#D4EEFC\"><strong>resultStatus</strong></td><td style=\"background-color:#D4EEFC\"><strong>resultCode</strong></td><td style=\"background-color:#D4EEFC\"><strong>resultMessage</strong></td></tr></tbody><tbody><tr><td colspan=\"1\">U</td><td colspan=\"1\">REFUND_IN_PROCESS</td><td colspan=\"1\">Refund is under processing.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"09c851d397096011c3e8beb38f083413\">F</p></td><td colspan=\"1\" rowspan=\"1\">REPEAT_REQ_INCONSISTENT</td><td colspan=\"1\" rowspan=\"1\">Repeated submit, and requests are inconsistent.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"a5d5c04de5adc0f07496ee20383edd5c\">F</p></td><td colspan=\"1\"><p data-lake-id=\"640707bd20cb5fab44b4e8d655304ce0\">PARTNER_STATUS_ABNORMAL</p></td><td colspan=\"1\" rowspan=\"1\">Partner status abnormal.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"b7801c1b7a2f673c0e0e5c4b6c47f038\">F</p></td><td colspan=\"1\" rowspan=\"1\">ORDER_NOT_EXIST</td><td colspan=\"1\" rowspan=\"1\">Order does not exist.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"755bb805b8684b589f8d829e2396b694\">F</p></td><td colspan=\"1\" rowspan=\"1\">ORDER_STATUS_INVALID</td><td colspan=\"1\" rowspan=\"1\">Order status is invalid.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"2bd3bf43c5be1a696191066cf13d88b6\">F</p></td><td colspan=\"1\" rowspan=\"1\">REFUND_WINDOW_EXCEED</td><td colspan=\"1\" rowspan=\"1\">Exceed Refund window.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"86cbe0c4aa0a97490ab6fbc1dc8757b5\">F</p></td><td colspan=\"1\" rowspan=\"1\">REFUND_AMOUNT_EXCEED</td><td colspan=\"1\" rowspan=\"1\">The total refund amount has exceed the payment amount.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"184b9a20a9afc10abc6360be958360c6\">F</p></td><td colspan=\"1\" rowspan=\"1\">PARTNER_BALANCE_NOT_ENOUGH</td><td colspan=\"1\" rowspan=\"1\">The partner balance is not enough.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"b2c1172fe45e439335d8adaeb3a2d191\">F</p></td><td colspan=\"1\" rowspan=\"1\">CURRENCY_NOT_SUPPORT</td><td colspan=\"1\" rowspan=\"1\">The currency is not supported.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"686c4d9fff68cbc8dd2d7263d73be832\">F</p></td><td colspan=\"1\"><p data-lake-id=\"fc7ca10c27cbd8b72d4c692e1447ee2b\">EXPIRED_AGENT_TOKEN</p></td><td colspan=\"1\" rowspan=\"1\">The agent token of Mini Program is expired.</td></tr><tr><td colspan=\"1\"><p data-lake-id=\"c6f9c975c83a52d50c3894018fdaeba5\">F</p></td><td colspan=\"1\" rowspan=\"1\">INVALID_AGENT_TOKEN</td><td colspan=\"1\"><p data-lake-id=\"7ec03779d93a7ec0dde012d9e7dd1bd6\">The <span>agent </span>token of <span>Mini Program</span> is invalid.</p></td></tr></tbody></table></div><h1 id=\"SAs72\" class=\"styles-module_anchored__AxVRP h1 \"><span data-id=\"SAs72\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span><span>Sample</span></h1><p data-lake-id=\"8a532c8a08049f6d2ea9734af8fa9a1f\">For example, a wallet user applies for refund of 100 USD of a successful payment at the merchant/partner. So the merchant/<span>partner</span> will call this refund API to the wallet to refund money to users.</p><img alt=\"/v2/payments/refund\" src=\"https://ac.alipay.com/storage/2020/5/11/793a3d8d-5270-405b-9362-e6a670b9c842.png\" style=\"max-width:600px\" class=\"docs-image\" data-src=\"https://cdn.nlark.com/lark/__puml/762c9981fcbcac007d197e194d638d3b.svg?OSSAccessKeyId=LTAI4GGhPJmQ4HWCmhDAn4F5&amp;Expires=4773287338&amp;Signature=C2b2Toza%2BaG6jn4OrX7AwbOwJrs%3D#lake_card_v2=eyJjb2RlIjoiQHN0YXJ0dW1sXG5cbmF1dG9udW1iZXJcblxuYm94IFwiTWVyY2hhbnRcIiAgICNsaWdodHllbGxvd1xucGFydGljaXBhbnQgXCJNaW5pIFByb2dyYW1cIiBhcyBNUCAjZGVlcHNreWJsdWVcbnBhcnRpY2lwYW50IFwiTWVyY2hhbnQgQmFja2VuZFwiIGFzIG1lcmNoYW50ICAjc2t5Ymx1ZVxuZW5kIGJveFxuXG5ib3ggXCJXYWxsZXRcIiAgICNzZWFzaGVsbFxucGFydGljaXBhbnQgXCJXYWxsZXQgQmFja2VuZFwiIGFzIHdhbGxldCAgI29yYW5nZVxucGFydGljaXBhbnQgXCJXYWxsZXQgQXBwXCIgYXMgd2FsbGV0QXBwICAjb3JhbmdlXG5lbmQgYm94XG5cbk1QIC0-IG1lcmNoYW50OiBzZW5kIHJlZnVuZCByZXF1ZXN0XG5hY3RpdmF0ZSBNUCAjZGVlcHNreWJsdWVcbmFjdGl2YXRlIG1lcmNoYW50ICNza3libHVlXG5cbm1lcmNoYW50IC0-IHdhbGxldDogcmVmdW5kIHJlcXVlc3Qgd2l0aCAvdjIvcGF5bWVudHMvcmVmdW5kXG5hY3RpdmF0ZSB3YWxsZXQgI29yYW5nZVxuXG53YWxsZXQgLS0-IG1lcmNoYW50OiByZXR1cm4gcmVmdW5kIHJlc3VsdFxuXG5tZXJjaGFudCAtLT4gTVA6IHJldHVybiByZWZ1bmQgcmVzdWx0XG5kZWFjdGl2YXRlIG1lcmNoYW50XG5kZWFjdGl2YXRlIE1QXG5cbndhbGxldEFwcCAtPiB3YWxsZXQ6IGlucXVpcnkgcmVmdW5kIHByb2Nlc3NcbmFjdGl2YXRlIHdhbGxldEFwcCAjb3JhbmdlXG5cbndhbGxldCAtLT4gd2FsbGV0QXBwOiByZXR1cm4gcmVmdW5kIHJlc3VsdFxuZGVhY3RpdmF0ZSB3YWxsZXRcblxuQGVuZHVtbCIsInR5cGUiOiJwdW1sIiwibWFyZ2luIjp0cnVlLCJpZCI6Im11YVRBIiwidXJsIjoiaHR0cHM6Ly9jZG4ubmxhcmsuY29tL2xhcmsvX19wdW1sLzc2MmM5OTgxZmNiY2FjMDA3ZDE5N2UxOTRkNjM4ZDNiLnN2Zz9PU1NBY2Nlc3NLZXlJZD1MVEFJNEdHaFBKbVE0SFdDbWhEQW40RjUmRXhwaXJlcz00NzczMjg3MzM4JlNpZ25hdHVyZT1DMmIyVG96YSUyQmFHNmpuNE9yWDdBd2JPd0pycyUzRCIsImNhcmQiOiJkaWFncmFtIn0=\" loading=\"lazy\"><ol start=\"1\"><li>User can start a refund request from the Mini Program or the merchant cashier.</li><li>The merchant server calls this <span style=\"background-color:#E9E9E9\">refund</span> interface to refund.</li><li>E-wallet returns the refund result to the merchant server.</li><li>The merchant should return the refund result to the Mini Program or the merchant cashier.</li></ol><h2 id=\"we7CI\" class=\"styles-module_anchored__AxVRP h2 \"><span data-id=\"we7CI\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span>Request </h2><div class=\"styles-module_copyWrapper__Fc5qV\"><div class=\"styles-module_copyButton__vn-Pc\"><svg class=\"icon icon-copy\" viewBox=\"64 64 896 896\" width=\"1em\" height=\"1em\" fill=\"#ccc\" aria-hidden=\"true\"><path d=\"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z\"></path></svg>copy</div><pre style=\"display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa;transition:background var(--transition-delay)\"><code class=\"language-json\" style=\"white-space:pre\"><span>{\n</span><span>  </span><span style=\"color:#986801\">\"refundRequestId\"</span><span>: </span><span style=\"color:#50a14f\">\"2019112719074101000700000088881xxxx\"</span><span>,\n</span><span>  </span><span style=\"color:#986801\">\"paymentId\"</span><span>: </span><span style=\"color:#50a14f\">\"201911271907410100070000009999xxxx\"</span><span>,\n</span><span>  </span><span style=\"color:#986801\">\"refundAmount\"</span><span>: {\n</span><span>    </span><span style=\"color:#986801\">\"currency\"</span><span>: </span><span style=\"color:#50a14f\">\"USD\"</span><span>,\n</span><span>    </span><span style=\"color:#986801\">\"value\"</span><span>: </span><span style=\"color:#50a14f\">\"10000\"</span><span>\n</span>  }\n<!-- -->}</code></pre></div><ul><li><strong>refundRequestId</strong> is the unique ID of this refund request, generated by merchant/partner, <span>merchant/partner should make sure it is unique, because wallet will use </span><strong><span>refundRequestId</span></strong><span> to do idempotent process.</span></li><li><strong>paymentId</strong><strong>&nbsp;</strong>is the payment ID generated by Wallet, which is the unique payment identifier associated with this refund.</li><li><strong>refundAmount&nbsp;</strong>describes 100 USD should refund to user, refund amount should less than origin payment amount. The amount to pay out for this <strong>refund.refundAmount.currency</strong> and <strong>paymentAmount.currency</strong> in <a href=\"https://miniprogram.gcash.com/docs/miniprogram_gcash/mpdev-old/xww2sz\">payment request</a> are the same. And if there are multiple refunds for a particular payment, the total successful refunded amount cannot exceed the payment amount in the payment transaction.</li></ul><p data-lake-id=\"31ef11edc2505b157b3ec5ec3ac51bbd\"><span class=\"lake-fontsize-12\"><strong><span>Note:</span></strong></span></p><ul><li><strong>paymentId</strong><strong> </strong><span>and</span><strong> </strong><strong>paymentRequestId</strong><strong> </strong>can not both empty, wallet has to find out the origin payment order based on <strong>paymentId</strong><strong> </strong><span>or</span><strong> paymentRequestId</strong><span>.</span></li></ul><h2 id=\"cBMvc\" class=\"styles-module_anchored__AxVRP h2 \"><span data-id=\"cBMvc\" class=\"index-module_anchor__UrjO7 styles-module_anchorLink__mbBm1\"><span role=\"img\" aria-label=\"link\" class=\"anticon anticon-link\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"link\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\"></path></svg></span></span>Response </h2><div class=\"styles-module_copyWrapper__Fc5qV\"><div class=\"styles-module_copyButton__vn-Pc\"><svg class=\"icon icon-copy\" viewBox=\"64 64 896 896\" width=\"1em\" height=\"1em\" fill=\"#ccc\" aria-hidden=\"true\"><path d=\"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z\"></path></svg>copy</div><pre style=\"display:block;overflow-x:auto;padding:0.5em;color:#383a42;background:#fafafa;transition:background var(--transition-delay)\"><code class=\"language-json\" style=\"white-space:pre\"><span>{\n</span><span>  </span><span style=\"color:#986801\">\"result\"</span><span>: {\n</span><span>    </span><span style=\"color:#986801\">\"resultCode\"</span><span>: </span><span style=\"color:#50a14f\">\"SUCCESS\"</span><span>,\n</span><span>    </span><span style=\"color:#986801\">\"resultStatus\"</span><span>: </span><span style=\"color:#50a14f\">\"S\"</span><span>,\n</span><span>    </span><span style=\"color:#986801\">\"resultMessage\"</span><span>: </span><span style=\"color:#50a14f\">\"success\"</span><span>\n</span>  },\n<span>  </span><span style=\"color:#986801\">\"refundId\"</span><span>: </span><span style=\"color:#50a14f\">\"2019112719074101000700000019000xxxx\"</span><span>,\n</span><span>  </span><span style=\"color:#986801\">\"refundTime\"</span><span>: </span><span style=\"color:#50a14f\">\"2019-11-27T12:01:01+08:30\"</span><span>\n</span>}</code></pre></div><ul><li><strong>result.resultStatus==S</strong> shows that the<em> </em>Wallet refund is successful.</li><li><strong>refundId</strong> is generated by Wallet, uniquely identifies the refund.</li><li><strong>refundTime</strong> describes the success date time of this refund.</li></ul></div></div><div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button><button class=\"pswp__button pswp__button--share\" title=\"Share\"></button><button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button><button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"><div class=\"pswp__share-tooltip\"></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\"></button><button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\"></button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div></div></article></main></div></div></div></div></div>\n    \n    \n  \n  <iframe src=\"https://tracert.alipay.com/cross.html\" style=\"width: 1px; height: 1px; position: absolute; left: -100px; bottom: -100px; display: none;\"></iframe></body></html>"
}